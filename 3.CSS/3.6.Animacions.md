---

title: 3.6.- Animacions amb CSS
layout: default
parent: 3.- CSS
nav_order: 60
has_children: true

---

Aquí tens la redacció millorada, amb una explicació més clara, comentaris en els fragments de codi i una ampliació de la taula amb totes les opcions per a cada propietat.

# **Animacions amb CSS**

Les animacions en CSS ens permeten crear efectes visuals dinàmics i atractius sense necessitat de JavaScript. Amb la propietat **`animation`** i la regla **`@keyframes`**, podem definir i aplicar comportaments animats que alteren les propietats d'un element al llarg del temps.

---

## **Regla `@keyframes`**

La regla **`@keyframes`** defineix els **estats clau** d'una animació, especificant com canvien les propietats CSS en moments concrets. Cada estat clau representa un conjunt de propietats i els seus valors en un moment determinat.

### **Funcionament**
1. **Definició del nom**: Cada animació necessita un nom únic.
2. **Estats clau (`from`, `to` o percentatges)**:
   - **`from`**: Estat inicial (equivalent a **0%**).
   - **`to`**: Estat final (equivalent a **100%**).
   - Percentatges (**`0%`**, **`50%`**, **`100%`**) per definir passos intermedis.

### **Exemple:**
```css
/* Definim l'animació "exemple" */
@keyframes exemple {
  from { /* Estat inicial: invisible */
    opacity: 0;
  }
  to { /* Estat final: visible */
    opacity: 1;
  }
}
```

En l'exemple, l'element passa d'una opacitat de **0** (invisible) a **1** (completament visible).

---

## **Propietat `animation`**

La propietat **`animation`** aplica les animacions definides amb `@keyframes` als elements seleccionats.

### **Sintaxi:**
```css
animation: <nom-animacio> <duracio> <funcio-temporitzacio> <retard> <iteracions> <direccio> <mode-final> <estat-joc>;
```

### **Exemple explicat:**
```css
.element {
  animation: fadeIn 2s ease-in-out 1s infinite alternate;
  /* fadeIn: Nom de l'animació definida amb @keyframes */
  /* 2s: Durada de l'animació (2 segons) */
  /* ease-in-out: Transició suau al principi i al final */
  /* 1s: Retard abans de començar l'animació */
  /* infinite: L'animació es repeteix indefinidament */
  /* alternate: Alterna entre els estats inicial i final */
}
```

---

## **Propietats de `animation`**

### **Propietats individuals**

| **Propietat**                | **Descripció**                                                                 | **Valors possibles**                                                                                      |
|------------------------------|-------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| **`animation-name`**         | Nom de l'animació definida amb `@keyframes`.                                  | Nom de l'animació o `none` si no hi ha cap animació.                                                     |
| **`animation-duration`**     | Temps que dura l'animació (en segons o mil·lisegons).                         | Temps (ex. `2s`, `500ms`).                                                                               |
| **`animation-timing-function`** | Defineix la velocitat de l'animació.                                          | `ease` (per defecte), `linear`, `ease-in`, `ease-out`, `ease-in-out`, funcions personalitzades (`cubic-bezier`). |
| **`animation-delay`**        | Temps d'espera abans de començar l'animació.                                  | Temps (ex. `1s`, `250ms`).                                                                               |
| **`animation-iteration-count`** | Nombre de vegades que es repeteix l'animació.                                | Nombre enter (ex. `1`, `3`) o `infinite`.                                                               |
| **`animation-direction`**    | Direcció de l'animació.                                                       | `normal`, `reverse`, `alternate`, `alternate-reverse`.                                                  |
| **`animation-fill-mode`**    | Com es comporta l'element abans o després de l'animació.                      | `none` (per defecte), `forwards`, `backwards`, `both`.                                                  |
| **`animation-play-state`**   | Pausa o reprèn l'animació.                                                    | `running`, `paused`.                                                                                    |

---

### **Valors detallats**

1. **`animation-timing-function`:**
   - **`ease`**: Suau al principi i al final (per defecte).
   - **`linear`**: Velocitat constant.
   - **`ease-in`**: Comença suau i accelera.
   - **`ease-out`**: Comença ràpid i acaba suau.
   - **`ease-in-out`**: Suau al principi i al final.
   - **`cubic-bezier(x1, y1, x2, y2)`**: Funció personalitzada.

2. **`animation-direction`:**
   - **`normal`**: Executa l'animació des de l'inici fins al final.
   - **`reverse`**: Executa l'animació des del final fins a l'inici.
   - **`alternate`**: Alterna entre normal i reverse.
   - **`alternate-reverse`**: Alterna començant pel reverse.

3. **`animation-fill-mode`:**
   - **`none`**: L'animació no afecta l'element fora de la durada.
   - **`forwards`**: L'element manté l'estat final de l'animació.
   - **`backwards`**: L'element assumeix l'estat inicial durant el retard.
   - **`both`**: Combina `forwards` i `backwards`.

4. **`animation-iteration-count`:**
   - Qualsevol número enter positiu (ex. `1`, `3`).
   - **`infinite`**: L'animació es repeteix indefinidament.

---

### **Exemple:**

1. **Definim l'animació amb `@keyframes`:**
   ```css
   /* L'element es mou 100px cap a la dreta */
   @keyframes move {
     from { /* Estat inicial: posició original */
       transform: translateX(0);
     }
     to { /* Estat final: 100px a la dreta */
       transform: translateX(100px);
     }
   }
   ```

2. **Apliquem l'animació a un element:**
   ```css
   .element {
     animation: move 3s ease-in-out infinite alternate;
     /* move: Nom de l'animació definida amb @keyframes */
     /* 3s: Durada de l'animació (3 segons) */
     /* ease-in-out: Transició suau al principi i al final */
     /* infinite: L'animació es repeteix indefinidament */
     /* alternate: Alterna entre els estats inicial i final */
   }
   ```

En aquest exemple, l'element es mourà 100px cap a la dreta i després tornarà a la seva posició inicial, repetint-ho indefinidament amb una transició suau.

---

### **Ús combinat de `@keyframes` i `animation`**

Per crear i aplicar una animació amb CSS, seguim dos passos principals: definir l'animació amb **`@keyframes`** i aplicar-la a un element amb la propietat **`animation`**.

---

- **1. Definim l'animació amb `@keyframes`:**

Amb **`@keyframes`**, especifiquem els estats inicials i finals (o intermedis) de l'animació:

```css
@keyframes move {
  from { 
    transform: translateX(0); /* Estat inicial: sense desplaçament */
  }
  to { 
    transform: translateX(100px); /* Estat final: desplaçament de 100px cap a la dreta */
  }
}
```

**Explicació:**
- **`from`**: Defineix l'estat inicial de l'element (aquí, sense desplaçament).
- **`to`**: Defineix l'estat final de l'element (desplaçat 100px cap a la dreta).

---

- **2. Apliquem l'animació a un element amb `animation`:**

Utilitzem la propietat **`animation`** per associar l'animació definida amb l'element desitjat:

```css
.element {
  animation: move 3s ease-in-out infinite alternate;
  /* move: Nom de l'animació definida amb @keyframes */
  /* 3s: Durada de l'animació (3 segons) */
  /* ease-in-out: Transició suau al principi i al final */
  /* infinite: L'animació es repeteix indefinidament */
  /* alternate: Alterna entre els estats inicial i final */
}
```

---

- **Comportament resultant:**

- L'element es desplaçarà **100px cap a la dreta** en **3 segons**.
- El moviment seguirà una transició suau, començant lentament, accelerant i finalitzant suaument (**ease-in-out**).
- L'animació es **repetirà indefinidament** i alternarà entre el desplaçament cap a la dreta i el retorn a la posició original (**alternate**).

Amb aquesta combinació de **`@keyframes`** i **`animation`**, podem crear efectes visuals elegants i dinàmics de manera senzilla.

---

## Exemples d'animaciós

### **1. Animació de desplaçament horitzontal**: `moure`

- **Nom de l'animació**: `moure`.  
- Aquesta animació desplaça un element horitzontalment 100px cap a la dreta i torna al seu punt d'origen.

```css
/* Definim l'animació de desplaçament */
@keyframes moure {
  from {
    transform: translateX(0); /* Estat inicial: sense desplaçament */
  }
  to {
    transform: translateX(100px); /* Estat final: 100px cap a la dreta */
  }
}

/* Apliquem l'animació a un element */
.element {
  animation: moure 2s ease-in-out infinite alternate;
  /* moure: Nom de l'animació */
  /* 2s: Durada de l'animació (2 segons) */
  /* ease-in-out: Suau al principi i al final */
  /* infinite: Repetició infinita */
  /* alternate: Alterna entre els estats inicial i final */
}
```

---

### **2. Animació de canvi de color**: `canviColor`

- **Nom de l'animació**: `canviColor`.  
- Fa que el text d'un element alterne entre roig i blau de manera infinita.

```css
/* Definim l'animació de canvi de color */
@keyframes canviColor {
  from {
    color: red; /* Estat inicial: text de color roig */
  }
  to {
    color: blue; /* Estat final: text de color blau */
  }
}

/* Apliquem l'animació a un element */
.element {
  animation: canviColor 2s infinite alternate;
  /* canviColor: Nom de l'animació */
  /* 2s: Durada d'una alternança de color (2 segons) */
  /* infinite: Repetició infinita */
  /* alternate: Alterna entre roig i blau */
}
```

---

### **3. Animació de canvi de color de fons**: `canviFons`

- **Nom de l'animació**: `canviFons`.  
- El color de fons passa successivament de roig a groc i després a blau.

```css
/* Definim l'animació del color de fons */
@keyframes canviFons {
  0% {
    background-color: red; /* Color inicial: roig */
  }
  50% {
    background-color: yellow; /* Color intermedi: groc */
  }
  100% {
    background-color: blue; /* Color final: blau */
  }
}

/* Apliquem l'animació a un element */
.element {
  animation: canviFons 3s infinite;
  /* canviFons: Nom de l'animació */
  /* 3s: Durada completa del cicle (3 segons) */
  /* infinite: Repetició infinita */
}
```

---

### **4. Animació de rotació**: `rotar`

- **Nom de l'animació**: `rotar`.  
- Fa girar un element completant una volta de 360 graus de manera contínua.

```css
/* Definim l'animació de rotació */
@keyframes rotar {
  from {
    transform: rotate(0); /* Estat inicial: sense rotació */
  }
  to {
    transform: rotate(360deg); /* Estat final: volta completa de 360 graus */
  }
}

/* Apliquem l'animació a un element */
.element {
  animation: rotar 2s linear infinite;
  /* rotar: Nom de l'animació */
  /* 2s: Durada d'una volta completa (2 segons) */
  /* linear: Velocitat constant durant tota la rotació */
  /* infinite: Repetició infinita */
}
```

---

### **5. Animació de desplaçament amb estats intermedis**: `moure`

- **Nom de l'animació**: `moure`.  
- Desplaça un element horitzontalment amb un moviment d'anada i tornada.

```css
/* Definim l'animació amb estats intermedis */
@keyframes moure {
  0% {
    transform: translateX(0); /* Estat inicial: posició original */
  }
  50% {
    transform: translateX(100px); /* Punt intermedi: 100px cap a la dreta */
  }
  100% {
    transform: translateX(0); /* Estat final: tornada a la posició inicial */
  }
}

/* Apliquem l'animació a un element */
.element {
  animation: moure 3s ease-in-out infinite;
  /* moure: Nom de l'animació */
  /* 3s: Durada completa del moviment (3 segons) */
  /* ease-in-out: Moviment suau d'anada i tornada */
  /* infinite: Repetició infinita */
}
```

---

### **6. Animació d'opacitat**: `fondre`

- **Nom de l'animació**: `fondre`.  
- Fa que un element alterne entre completament visible i semiopac.

```css
/* Definim l'animació d'opacitat */
@keyframes fondre {
  from {
    opacity: 1; /* Estat inicial: completament visible */
  }
  to {
    opacity: 0.5; /* Estat final: semiopac */
  }
}

/* Apliquem l'animació a un element */
.element {
  animation: fondre 2s infinite alternate;
  /* fondre: Nom de l'animació */
  /* 2s: Durada d'una alternança d'opacitat (2 segons) */
  /* infinite: Repetició infinita */
  /* alternate: Alterna entre completament visible i semiopac */
}
```

---

### **7. Animació de canvi de mida**: `redimensionar`

- **Nom de l'animació**: `redimensionar`.  
- Augmenta i redueix la mida d'un element amb suavitat.

```css
/* Definim l'animació de redimensionament */
@keyframes redimensionar {
  from {
    transform: scale(1); /* Estat inicial: mida original */
  }
  to {
    transform: scale(1.5); /* Estat final: augmenta un 50% */
  }
}

/* Apliquem l'animació a un element */
.element {
  animation: redimensionar 2s ease-in-out infinite alternate;
  /* redimensionar: Nom de l'animació */
  /* 2s: Durada del canvi de mida (2 segons) */
  /* ease-in-out: Transició suau al principi i al final */
  /* infinite: Repetició infinita */
  /* alternate: Alterna entre augmentar i tornar a la mida original */
}
```

---


### **Regles `@media` i `@supports`**

Les regles **`@media`** i **`@supports`** en CSS ens permeten aplicar estils condicionalment, ja siga adaptant-los a les característiques del dispositiu o comprovant la compatibilitat amb certes propietats. Són essencials per aconseguir dissenys responsius i assegurar la consistència visual en diferents navegadors i dispositius.

---

## **`@media`: Estils adaptatius segons condicions del dispositiu**

La regla **`@media`** aplica estils només si es compleixen determinades condicions del dispositiu, com la **mida de la pantalla**, l'**orientació** o la **resolució**. És un element fonamental en **dissenys responsius**.

### **Exemple bàsic: Mida de pantalla**

```css
body {
  font-size: 16px; /* Mida del text per defecte */
}

@media (max-width: 768px) {
  body {
    font-size: 14px; /* Text més menut per pantalles mitjanes */
  }
}

@media (max-width: 480px) {
  body {
    font-size: 12px; /* Text encara més menut per pantalles xicotetes */
  }
}
```

- **Pantalles grans (>768px)**: Mida del text de 16px.
- **Pantalles mitjanes (≤768px)**: Text redimensionat a 14px.
- **Pantalles xicotetes (≤480px)**: Text redimensionat a 12px.

---

### **Altres condicions útils de `@media`**

1. **Orientació del dispositiu:**

```css
@media (orientation: landscape) {
  body {
    background-color: lightblue; /* Fons blau per orientació horitzontal */
  }
}

@media (orientation: portrait) {
  body {
    background-color: lightgreen; /* Fons verd per orientació vertical */
  }
}
```

- **`landscape`**: Quan el dispositiu està en mode horitzontal.
- **`portrait`**: Quan el dispositiu està en mode vertical.

---

2. **Resolució del dispositiu:**

```css
@media (min-resolution: 300dpi) {
  img {
    border: 5px solid red; /* Bord vermell només en dispositius d'alta resolució */
  }
}
```

Aquest exemple aplica estils específics a dispositius amb una resolució mínima de **300dpi**, com les pantalles Retina.

---

### **Exemple complet: Disseny responsiu amb `@media`**

En aquest exemple es crea una **distribució de columnes adaptable** segons la mida de la pantalla:

```css
.grid-container {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* 4 columnes per defecte */
  gap: 20px; /* Separació entre columnes */
}

@media (max-width: 1024px) {
  .grid-container {
    grid-template-columns: repeat(2, 1fr); /* 2 columnes per pantalles mitjanes */
  }
}

@media (max-width: 600px) {
  .grid-container {
    grid-template-columns: 1fr; /* 1 columna per pantalles menudes */
  }
}
```

- **Pantalles grans (>1024px)**: 4 columnes.
- **Pantalles mitjanes (≤1024px)**: 2 columnes.
- **Pantalles xicotetes (≤600px)**: 1 columna.

---

## **`@supports`: Comprovació de compatibilitat**

La regla **`@supports`** permet verificar si el navegador admet una propietat CSS abans d'aplicar estils.

### **Exemple bàsic: Compatibilitat amb `grid`**

```css
@supports (display: grid) {
  .container {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Disseny en 3 columnes si es suporta grid */
  }
}
```

Si el navegador admet **`display: grid`**, s’aplica el disseny de columnes. Si no, es poden definir estils alternatius fora de la regla.

---

### **Animacions amb pseudoclases, pseudoelements i propietats CSS**

Les **pseudoclases** i **pseudoelements** són eines potents per crear interactivitat i animacions. Permeten aplicar efectes quan es produeixen esdeveniments específics, com passar el ratolí sobre un element (**`:hover`**) o modificar el contingut abans/després d’un element (**`:before`/`:after`**).

---

### **Exemple genèric d'ús: Pseudoclases per a animacions**

```css
.element:hover {
  animation: exampleEffect 0.5s ease-in-out;
  /* exampleEffect: Nom de l'animació */
  /* 0.5s: Durada de l'animació */
  /* ease-in-out: Transició suau al principi i al final */
}

@keyframes exampleEffect {
  from {
    transform: scale(1); /* Estat inicial: mida original */
  }
  to {
    transform: scale(1.1); /* Estat final: augmenta lleugerament la mida */
  }
}
```

- **`:hover`**: Activa l’animació quan el ratolí passa per damunt de l’element.
- L’animació augmenta lleugerament la mida de l’element durant mig segon.

---

### **Taula resum de propietats i pseudoclases**

| **Propietat/Pseudoclasse** | **Descripció**                                                                  | **Exemple d'ús**                                           |
|----------------------------|--------------------------------------------------------------------------------|-----------------------------------------------------------|
| `:hover`                   | Activa animacions quan el ratolí passa per damunt de l'element.                | Augmentar la mida o canviar el color d'un element.        |
| `:focus`                   | Activa animacions quan un element rep el focus (inputs o botons).              | Ressaltar un camp d'entrada seleccionat.                 |
| `:active`                  | Activa animacions mentre l'element està sent clicat.                          | Reduir la mida d’un botó temporalment.                   |
| `:checked`                 | Activa animacions quan un checkbox o radio està seleccionat.                  | Canviar el color d’un text associat a un checkbox marcat. |
| `:disabled`                | Aplica estils a elements deshabilitats.                                       | Reduir l’opacitat d’un botó deshabilitat.                |
| `:nth-child()`             | Aplica estils basats en la posició d’un element dins del seu contenidor.      | Canviar el color de files imparells d’una taula.         |
| `:before` / `:after`       | Crea continguts animats abans o després d’un element.                         | Afegir una decoració animada a un botó.                  |
| `animation`                | Defineix animacions completes i automàtiques.                                | Crear efectes de rebot o desplaçament.                   |
| `transition`               | Defineix transicions suaus entre estats d'estil.                             | Canviar l'opacitat d'un element en passar el ratolí.      |


