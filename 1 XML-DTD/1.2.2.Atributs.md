---
title:  Atributs DTD
parent: 1.1.- DTD - Document Type Definition
grand_parent: 1.- XML i DTD
has_children: false
layout: default
nav_order: 20
has_toc: true
---

# Atributs en un DTD

### Declaracions de llistes d’atributs per als tipus d’elements

Ja sabem declarar elements, ara vorem com es declaren els atributs associats a un element.

### Recordem...

Els atributs en Document Type Definition (DTD) en XML són elements clau que es poden utilitzar per proporcionar informació addicional sobre els elements dins del document XML.

* Els atributs van insertats en els elements.
* Estan formats per parells NOM-VALOR.
* Els valors van entre “ “.
* Poden ser obligatoris, opcionals , fixes...
* Normalment accepten valors de text, números, llistes de possibles valors, etc.

En XML podem definir els nostres propis atributs dins dels elements.
Per exemple l’atribut país a l’etiqueta f1:

```xml
<esportistes>
  <f1 país="Països Baixos">Max Verstappen</f1>
  <f1>Carlos Sainz</f1>
  <tenis>Carlos Alcaraz</tenis>
</esportistes>
```

**- Els atributs**

  * Permeten afegir informació addicional als elements d'un document.
  * No poden contenir sub-atributs.
  * S'usen per afegir informació curta, senzilla i desestructurada.

**- Cadascun dels atributs**

  * Només es pot especificar una vegada
  * Pot aparéixer en qualsevol ordre.

### Declaració d’atributs en DTD

La sintaxi per declarar un atribut és:



<style>

.dtd .attlist            { color:#1d4ed8; font-weight:600; }  /* ATTLIST */
.dtd .element       { color:#059669; font-weight:600; }  /* nomElement */
.dtd .atribut       { color:#7c3aed; font-weight:600; }  /* nomAtribut */
.dtd .tipus         { color:#ea580c; font-weight:600; }  /* tipusAtribut */
.dtd .valoratribut  { color:#0891b2; font-weight:600; }  /* valorInicialAtribut */
</style>

<pre class="dtd"><code>
&lt;!<span class="attlist">ATTLIST</span> <span class="element">nomElement</span> <span class="atribut">nomAtribut</span> <span class="tipus">tipusAtribut</span> <span class="valoratribut">valorInicialAtribut</span> &gt;
</code></pre>


<p><strong>On:</strong></p>

<ul class="dtd">
  <li><span class="attlist">ATTLIST</span> : Declaració de marca per a un atribut o llista d'atributs.</li>
  <li><span class="element">nomElement</span> : Identificador de l'element al que s'aplica l'atribut.</li>
  <li><span class="atribut">nomAtribut</span> : Nom de l'atribut.</li>
  <li><span class="tipus">tipusAtribut</span> : Tipus.</li>
  <li><span class="valoratribut">valorInicialAtribut</span> : Valor per defecte.</li>
</ul>



Perfecte — el que vols és **guardar aquest fragment com un comentari invisible dins del Markdown**, sense que aparega ni el codi ni el text en Just the Docs.

Quan hi ha salts de línia o blocs múltiples (com el teu), el format curt `[//]: # ( ... )` no funciona bé.
En eixe cas, cal usar la **forma de comentari HTML**, que també és completament invisible en el renderitzat:

```markdown
<!--
<!ATTLIST nomElement nomAtribut tipusAtribut valorInicialAtribut >

On:

1. `<!ATTLIST` : Declaració de marca per a un atribut o llista d'atributs.
2. **nomElement** : Identificador de l'element al que s'aplica l'atribut.
3. **nomAtribut** : Nom del atribut
4. **tipusAtribut** : Tipus
5. **valorInicialAtribut** : Valor per defecte
-->
```


### Exemple

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mensajes [
  <!ELEMENT mensajes (mensaje+)>
  <!ELEMENT mensaje (de, a, texto)>
  <!ATTLIST mensaje prioridad (normal|urgente) "normal">
  <!ELEMENT de (#PCDATA)>
  <!ELEMENT a (#PCDATA)>
  <!ELEMENT texto (#PCDATA)>
  <!ATTLIST texto idioma CDATA #REQUIRED>
]>
<mensajes>
  <mensaje prioridad="urgente">
    <de>Alfredo Regno</de>
    <a>Hans van Parijs</a>
    <texto idioma="holandés">
      Trobo Hans, hoe gaat het? ...
    </texto>
  </mensaje>
</mensajes>
```

* L'atribut **prioridad** pot estar en `<mensaje>` i pot tindre el valor "normal" o "urgente", sent "normal" el valor per defecte si no especifiquem l'atribut.
* Podem establir la necessitat o no d'especificar cada atribut.
* L'atribut **idioma**, pertany a `<texto>`, i pot contindre dades de caràcter (CDATA).
* **#REQUIRED**: indica que és obligatori especificar aquest atribut.

---

### Tipus d’Atributs

Els atributs poden ser de diferents tipus:

* **CDATA**: Caràcters de dades (text). Són els meés senzills, poden contindre qualsevol cosa.

  ```dtd
  <!ATTLIST element atribut CDATA #REQUIRED>
  ```

* **NMTOKEN**: Permet determinar que el valor d’un atribut ha de ser una sola paraula composta per els caràcters permesos en XML, és a dir, seqüències de caràcters alfanumèrics, guions baixos i altres caràcters especials, però no espais en blanc.

  ```dtd
  <!ATTLIST empleado codigo NMTOKEN #REQUIRED>
  ```

* **NMTOKENS**: Aquest és similar a NMTOKEN, però permet una llista de noms de tokens separats per espais en blanc.

  ```dtd
  <!ATTLIST contacto telefonos NMTOKENS #IMPLIED>
  ```

Exemple:

```dtd
<!ATTLIST mensaje fecha CDATA #REQUIRED>
<mensaje fecha="15 de Julio de 1999">

<!ATTLIST mensaje fecha NMTOKEN #REQUIRED>
<mensaje fecha="15-7-1999">
```

* **ENUMERAT**: Només es poden utilitzar valors específics.

  ```dtd
  <!ATTLIST coche marca (Ford | Toyota | Honda) "Ford">
  ```

* **ID**: Permet declarar un identificador en un element. Este valor ha de ser únic en el document. També ha de ser un nom correcte (ha de seguir les regles XML per als noms), és a dir, han de començar per una lletra de l'alfabet o un subratllat, guió o dos punts (NO PER UN NÚMERO) i no poden tindre espais en blanc.

  ```dtd
  <!ATTLIST elemento id ID #REQUIRED>
  ```

* **IDREF**: Permet crear referències a identificadors (ID). El valor de l’atribut ha de correspondre amb el d’un identificador existent al document.

  ```dtd
  <!ATTLIST empleado jefe IDREF #IMPLIED>
  ```

* **IDREFS**: Llista de referències a IDs d'altres elements (separats per espais en blanc).

  ```dtd
  <!ATTLIST pedido productos IDREFS #IMPLIED>
  ```

**Exemple ID, IDREF:**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE musica [
  <!ELEMENT musica (artistes, cancons)>
  <!ELEMENT artistes (artista*)>
  <!ELEMENT artista (#PCDATA)>
  <!ATTLIST artistes id ID #REQUIRED>
  <!ELEMENT cancons (canco*)>
  <!ELEMENT canco (#PCDATA)>
  <!ATTLIST canco referencia IDREF #REQUIRED>
]>
<musica>
  <artistes>
    <artista id="a1">John Lennon</artista>
    <artista id="a2">Bob Dylan</artista>
  </artistes>
  <cancons>
    <canco referencia="a1">Imagine</canco>
    <canco referencia="a1">Give Peace a Chance</canco>
    <canco referencia="a2">Blowin' in the Wind</canco>
    <canco referencia="a2">Like a Rolling Stone</canco>
  </cancons>
</musica>
```

**Exemple ID, IDREFS:**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE musica [
  <!ELEMENT musica (artistes, cancons)>
  <!ELEMENT artistes (artista*)>
  <!ELEMENT artista (#PCDATA)>
  <!ATTLIST artistes id ID #REQUIRED>
  <!ELEMENT cancons (canco*)>
  <!ELEMENT canco (#PCDATA)>
  <!ATTLIST canco referencia IDREFS #REQUIRED>
]>
<musica>
  <artistes>
    <artista id="a1">John Lennon</artista>
    <artista id="a2">Bob Dylan</artista>
  </artistes>
  <cancons>
    <canco referencia="a1 a2">Imagine</canco>
    <canco referencia="a1">Give Peace a Chance</canco>
    <canco referencia="a2">Blowin' in the Wind</canco>
    <canco referencia="a1 a2">Like a Rolling Stone</canco>
  </cancons>
</musica>
```

* **ENTITAT**: L'atribut amb aquest tipus fa referència a una entitat definida al DTD.

  ```dtd
  <!ATTLIST libro autor ENTITAT #IMPLIED>
  ```

* **ENTITATS**: Aquest tipus és similar a ENTITAT, però permet una llista de noms d'entitats.

  ```dtd
  <!ATTLIST documento referencias ENTITATS #IMPLIED>
  ```

---

### En resum...

| Tipus d'Atribut | Descripció                                                                                                                    |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| CDATA           | Permet qualsevol caràcter de dades (text).                                                                                    |
| ENUMERAT        | Només permet valors específics.                                                                                               |
| NMTOKEN         | Només permet noms de tokens (seqüències de caràcters alfanumèrics, guions baixos i altres caràcters especials, sense espais). |
| NMTOKENS        | És similar a NMTOKEN, però permet una llista de noms de tokens separats per espais.                                           |
| ID              | Ha de ser un identificador únic per a l'atribut dins del document.                                                            |
| IDREF           | Fa referència a l'ID d'un altre element.                                                                                      |
| IDREFS          | És una llista de referències a IDs d'altres elements.                                                                         |
| ENTITAT         | Fa referència a un nom d'entitat definida al DTD.                                                                             |
| ENTITATS        | És una llista de noms d'entitats definides.                                                                                   |

---

### Valors d’Atributs

* Els valors dels atributs poden ser literals o referències.
* En cas de literals, els valors han de coincidir exactament amb els especificats en ENUMERAT o ser de tipus CDATA.
* Les referències s'utilitzen per a IDREF, IDREFS i ENTITAT, i fan referència a altres elements definits al DTD.

```dtd
<!ATTLIST coche marca (Ford | Toyota | Honda) "Ford">
<!ATTLIST libro autor CDATA #REQUIRED>
<!ATTLIST empleado jefe IDREF #IMPLIED>
```

---

### Valors Predeterminats d’Atributs

* Pots especificar un valor predeterminat per a un atribut que s'utilitzarà si no es proporciona un valor al document XML.
* Valor entre comilles dobles (") o simples ('): L’atribut té valor per defecte.

Els valors predeterminats poden ser:

* **#REQUIRED**: L'atribut és obligatori.
* **#IMPLIED**: L'atribut és opcional.
* **#FIXED valor**: L'atribut té un valor fix que no es pot canviar.

Exemple:

```dtd
<!ATTLIST persona edad CDATA #REQUIRED>
<!ATTLIST libro idioma CDATA #IMPLIED>
<!ATTLIST coche color CDATA #FIXED "negro">
```

---

### Exemple Resum (amb DTD extern)

**Biblioteca.dtd**

```dtd
<!ELEMENT biblioteca (llibre+)>
<!-- Definim un element llibre amb atributs de diferents tipus -->
<!ELEMENT llibre (titol, autor)>
<!ELEMENT titol (#PCDATA)>
<!ELEMENT autor (#PCDATA)>
<!-- Atribut de tipus CDATA (dades de caràcter) -->
<!ATTLIST llibre ISBN CDATA #REQUIRED>
<!-- Atribut de tipus NMTOKEN (nom de caràcter sense espais en blanc) -->
<!ATTLIST llibre categoria NMTOKEN #IMPLIED>
<!-- Atribut de tipus ID (identificador únic) -->
<!ATTLIST llibre referencia ID #REQUIRED>
<!-- Atribut de tipus IDREF (referència a un ID existent) -->
<!ATTLIST llibre relacion IDREF #IMPLIED>
<!-- Atribut de tipus IDREFS (una llista de referències a IDs) -->
<!ATTLIST llibre similars IDREFS #IMPLIED>
<!-- Atribut de tipus ENTITAT per idiomes (entitats prèviament definides) -->
<!ATTLIST llibre idiomes ENTITAT #IMPLIED>
```

**Biblioteca.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE biblioteca SYSTEM "biblioteca.dtd" [
  <!ENTITY cat "Català">
  <!ENTITY lat "Llatí">
]>
<biblioteca>
  <llibre ISBN="978-1290" categoria="novel·la" referencia="L1" idiomes="&cat; &lat;">
    <titol>L’Ombra del Vent</titol>
    <autor>Zafón</autor>
  </llibre>
  <llibre ISBN="978-9210" categoria="no-ficció" referencia="L2" relacion="L1" similars="L3 L4">
    <titol>Un llibre d'aprenentatge</titol>
    <autor>Anònim</autor>
  </llibre>
  <llibre ISBN="978-XXXX" categoria="XXXX" referencia="L3">
    <titol>Títol L3</titol>
    <autor>Autor L3</autor>
  </llibre>
  <llibre ISBN="978-XXXX" categoria="XXXX" referencia="L4">
    <titol>Títol L4</titol>
    <autor>Autor L4</autor>
  </llibre>
</biblioteca>
```

---
