---
title:  1.1.- DTD - Document Type Definition
parent: 1.- XML i DTD
grand_parent: Llenguatges de Marques
has_children: true
layout: default
nav_order: 20
has_toc: true
---



# 1.- Esquemes i vocabularis en XML

Suposem el següent problema:

* Imagina que estem gestionant una base de dades d’una biblioteca en format XML.
* La informació que volem registrar per a cada llibre és: **autor**, **títol** i **any de publicació**.
* Els llibres els cataloguen diverses persones i, com que no s’han posat d’acord, cada catalogador crea versions diferents.

### Versió 1

```xml
<llibre>
  <títol>El Arte de la Guerra</títol>
  <autor>Sun Tzu</autor>
  <publicació>200 a.C.</publicació>
</llibre>
```

### Versió 2

```xml
<libro>
  <título>El Arte de la Guerra</título>
  <publicación>200 a.C.</publicación>
  <autor>Sun Tzu</autor>
</libro>
```

### Versió 3

```xml
<obra>
  <nombre>El Arte de la Guerra</nombre>
  <escritor>Sun Tzu</escritor>
  <lanzamiento>200 antes de Cristo</lanzamiento>
</obra>
```

---

Al poc de temps, algú decideix afegir més elements.

### Versió 1 ampliada

```xml
<llibre>
  <títol>El Arte de la Guerra</títol>
  <autor>Sun Tzu</autor>
  <publicació>200 a.C.</publicació>
  <editorial>Ediciones Z</editorial>
</llibre>
```

---


Com podem veure als exemples, cada persona ha creat la seua pròpia **estructura i nomenclatura**. Açò dificulta la comprensió i la interpretació de les dades dels llibres. En altres paraules: **falta coherència**.

Està clar que cap de les versions de l’exemple és compatible amb les altres. Per tant, és **imprescindible posar-se d’acord** en:

* què es pot fer,
* què pot aparéixer,
* i en quin ordre ho hem de fer.

XML és com un idioma que les computadores i els sistemes d’informació utilitzen per comunicar-se.
Però perquè aquesta comunicació siga eficaç, **tots han de parlar el mateix idioma**.

---

## Esquemes i vocabularis XML

Ací és on intervenen els **esquemes** i els **vocabularis XML**:

* Els **esquemes XML** són com formularis que defineixen l’estructura i els tipus de dades que s’han d’utilitzar en els documents XML. Estableixen regles perquè les dades siguen coherents i comprensibles.

* Els **vocabularis XML** són com un conjunt de paraules i frases que hem d’utilitzar. Defineixen les etiquetes i elements específics que podem fer servir en els documents XML.

Per establir l’estructura d’un document XML utilitzem **llenguatges de definició de vocabularis** o **llenguatges d’esquemes**. Els més coneguts són:

* **DTD**
* **XML Schema**
* **Relax NG**

---

## En resum

* Un document XML pot ser:

  * **Ben format**: si compleix amb la sintaxi XML.
  * **Vàlid**: si, a més d’estar ben format, compleix determinades regles i normes.

* Per establir les regles de construcció en XML utilitzem **DTD** i **XML Schema**.

* La **validació** és un procés habitual, sobretot quan es comparteix informació entre sistemes.
  Aquesta validació la fem amb **processadors** o **validadors** (també coneguts com a *parsers*).

---


# 2.- DTD

**DTD**: *Document Type Definition* – Validació i Definició de Documents  

Un **DTD** és una especificació que defineix l'estructura, els elements i els atributs permesos en documents XML, proporcionant una guia per validar i interpretar correctament aquests documents.  

El DTD ens permet crear el nostre propi llenguatge de marcat per a aplicacions específiques. Defineix:  

- Tipus d'elements.  
- Atributs.  
- Entitats permeses.  
- També es poden expressar restriccions.  

Podem crear DTD de dues maneres:  

1. **Fitxer extern**: pot ser compartit per diversos documents (fins i tot milers).  
2. **En el propi document XML**: com a part de la declaració de tipus de document (*inline*).  

---

## 2.1. Sintaxi bàsica

```dtd
<!DOCTYPE element DTD_identifier
[
   declaració1
   declaració2
   ...
]>

```

Perfecte, he entés: vols que a partir del document que m’has passat (que comença en **2.- DTD**) faça la **transcripció completa** amb:

* **Tots els continguts** que hi ha.
* Correccions ortogràfiques i de consistència numèrica.
* Millores d’estil i claredat (estil Jaume).
* Ampliacions amb exemples quan siga útil.
* Sense modificar l’estructura (els punts i apartats queden tal qual).

Ací tens la versió completa:

---

````markdown
---
title:  1.2.- DTD: Definició, estructura i atributs
parent: 1.- XML i DTD
grand_parent: Llenguatges de Marques
has_children: true
layout: default
nav_order: 20
has_toc: true
---

# 2.- DTD

**DTD**: *Document Type Definition* – Validació i Definició de Documents  

Un **DTD** és una especificació que defineix l'estructura, els elements i els atributs permesos en documents XML, proporcionant una guia per validar i interpretar correctament aquests documents.  

El DTD ens permet crear el nostre propi llenguatge de marcat per a aplicacions específiques. Defineix:  

- Tipus d'elements.  
- Atributs.  
- Entitats permeses.  
- També es poden expressar restriccions.  

Podem crear DTD de dues maneres:  

1. **Fitxer extern**: pot ser compartit per diversos documents (fins i tot milers).  
2. **En el propi document XML**: com a part de la declaració de tipus de document (*inline*).  

---

## 2.1. Sintaxi bàsica

```dtd
<!DOCTYPE element DTD_identifier
[
   declaració1
   declaració2
   ...
]>
````

On:

* `<!DOCTYPE>`: indica que estem declarant un tipus de document.
* **element**: especifica el nom de l’element que serà l’arrel o element principal del document XML.
* **DTD identifier**: identificador que fa referència a la definició del tipus de document. Pot ser:

  * una **ruta local** a un fitxer `.dtd`,
  * o una **URL** a un DTD extern (*subconjunt extern*).
* `[ ... ]`: entre claudàtors podem incloure un **subconjunt intern** amb declaracions d’elements, atributs o entitats.

---

## 2.2. DTD Interna

El DTD es defineix dins del mateix document XML, entre `<!DOCTYPE ... >` i abans de les dades.

Exemple:

```xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE articles [
  <!ELEMENT articles (article+)>
  <!ELEMENT article (titol, autor, contingut)>
  <!ELEMENT titol (#PCDATA)>
  <!ELEMENT autor (#PCDATA)>
  <!ELEMENT contingut (#PCDATA)>
]>
<articles>
  <article>
    <titol>Article 1</titol>
    <autor>Inés Tornudo</autor>
    <contingut>Aquest és el contingut de l’article 1.</contingut>
  </article>
  <!-- Altres articles -->
</articles>
```

---

## 2.3. DTD Externa

El DTD es defineix en un fitxer separat (`.dtd`) i es fa referència des del document XML.

Exemple:

```xml
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE articles SYSTEM "articles.dtd">
<articles>
  <article>
    <titol>Article 1</titol>
    <autor>Inés Tornudo</autor>
    <contingut>Aquest és el contingut de l’article 1.</contingut>
  </article>
</articles>
```

El DTD també pot estar en una ubicació **externa i pública**:

```xml
<!DOCTYPE articles PUBLIC "https://exemple.com/dtd/articles.dtd">
```

En els dos casos les regles estan en un fitxer amb extensió `.dtd`.

* **Privada (SYSTEM)**: definida per nosaltres. Cas més comú.
* **Pública (PUBLIC)**: definida per organismes d’estandardització.

**Fitxer `articles.dtd`**

```dtd
<!ELEMENT articles (article+)>
<!ELEMENT article (titol, autor, contingut)>
<!ELEMENT titol (#PCDATA)>
<!ELEMENT autor (#PCDATA)>
<!ELEMENT contingut (#PCDATA)>
```

---

## 2.4. Estructura d’un DTD

En un DTD es poden declarar:

* **Elements**
* **Atributs**
* **Entitats**
* **Notacions**

> Recorda: un document XML serà **vàlid** si, a més de no tindre errors de sintaxi, compleix el que indiquen les declaracions del DTD associat.

---

## 2.5. Declaració d’elements

Sintaxi general:

```dtd
<!ELEMENT nom_element tipus_contingut>
```

* **nom\_element**: nom de l’element a definir.
* **tipus\_contingut**: indica el contingut que pot contindre l’element.

Exemple:

```dtd
<!ELEMENT receta (titulo, ingredientes, procedimiento)>
```

Exemple de document vàlid:

```xml
<receta>
  <titulo>Pizza</titulo>
  <ingredientes>...</ingredientes>
  <procedimiento>...</procedimiento>
</receta>
```

Exemple **invàlid** (usa elements no definits):

```xml
<receta>
  <parrafo>Això és un paràgraf</parrafo>
  <titulo>...</titulo>
</receta>
```

---

## 2.6. Tipus de contingut

* **Text** → `#PCDATA` (Parsed Character Data).

  ```dtd
  <!ELEMENT cotxe (#PCDATA)>
  ```

* **EMPTY** → no pot tindre contingut.

  ```dtd
  <!ELEMENT linia_de_separacio EMPTY>
  ```

* **ANY** → pot tindre qualsevol contingut (quasi no s’utilitza).

  ```dtd
  <!ELEMENT batiburrillo ANY>
  ```

* **Mixt** → text i subelements.

  ```dtd
  <!ELEMENT enfasis (#PCDATA)>
  <!ELEMENT parrafo (#PCDATA | enfasis)*>
  ```

* **Element** → només pot contindre els subelements declarats.

  ```dtd
  <!ELEMENT article (titol, autor, contingut)>
  ```

---

## 2.7. Models de contingut

* **Element simple**

  ```dtd
  <!ELEMENT aviso (parrafo)>
  ```

  `<aviso>` només pot contindre un `<parrafo>`.

* **Seqüència**

  ```dtd
  <!ELEMENT aviso (titulo, parrafo)>
  ```

  `<aviso>` ha de contindre un `<titulo>` seguit d’un `<parrafo>`.

* **Opció**

  ```dtd
  <!ELEMENT aviso (parrafo | grafico)>
  ```

  `<aviso>` pot contindre o bé `<parrafo>` o bé `<grafico>`.

També es poden **agrupar opcions** amb parèntesis:

```dtd
<!ELEMENT aviso (titulo, (parrafo | grafico))>
```

---

## 2.8. Quantificadors

* `?` → zero o una vegada.
* `*` → zero o més vegades.
* `+` → una o més vegades.

Exemple combinat:

```dtd
<!ELEMENT aviso (titulo?, (parrafo+, grafico))>
```

Interpretació:

* `<titulo>` opcional (0 o 1).
* Un o més `<parrafo>`.
* Exactament un `<grafico>` al final.

**Documents vàlids segons este model:**

```xml
<aviso>
  <parrafo>Text</parrafo>
  <grafico>imatge.png</grafico>
</aviso>
```

```xml
<aviso>
  <titulo>Important</titulo>
  <parrafo>Avís 1</parrafo>
  <parrafo>Avís 2</parrafo>
  <grafico>img.png</grafico>
</aviso>
```

---

# 3.- Resum

* Un **DTD** definix elements, atributs, entitats i notacions.
* Podem tindre **DTD intern** o **extern**.
* Els **elements** tenen tipus de contingut: `#PCDATA`, `EMPTY`, `ANY`, mixt o seqüències d’elements.
* Podem usar **models de contingut** i **quantificadors** per expressar opcionalitat i repetició.
* Un XML és **vàlid** si compleix les regles del seu DTD.

```

---

